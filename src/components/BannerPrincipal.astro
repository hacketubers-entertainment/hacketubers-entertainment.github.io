---
import ScreenRelative from "./ScreenRelative.astro";
import gsap from "gsap";
---

<ScreenRelative />
<div class="contenedor-imagen-principal">
  <div class="contenido-informacion">
    <img
      class="logotipoHE"
      src="../logo.png"
      alt="Logotipo de Hacketubers Entertainment"
    />
    <p>Desarrollador de Aplicaciones y Videojuegos Indie</p>
    <button onclick="ver_mas()" class="ver-mas">Ver Informacion</button>
  </div>
</div>
<style>
  .contenedor-imagen-principal {
    overflow: hidden;
    width: 100%;
    height: 70vh;
    background-image: url("../fondoCuadros.webp");
    background-repeat: no-repeat;
    background-size: 100%;
    background-attachment: fixed;
    box-shadow:
      inset -1vw -1vw 3vw #29003f,
      inset 18px 18px 66px #e8bcff34;
  }
  .contenido-informacion {
    position: absolute;
    top: 25%;
    left: 1vw;
    color: aliceblue;
    background-color: rgba(0, 0, 0, 0.288);
    backdrop-filter: blur(10px);
    border-radius: 10px;
    padding: 30px;
  }
  .logotipoHE {
    width: 100px;
    height: 100px;
    border-radius: 50%;
    opacity: 0;
  }
  .ver-mas {
    background-color: transparent;
    color: white;
    border: 1px;
    border-color: white;
    border-style: solid;
    padding: 15px;
    cursor: pointer;
  }
  .ver-mas:hover {
    padding: 16px;
  }
  @media screen and (max-width: 800px) {
    .contenido-informacion {
      left: 0px;
    }
  }
</style>

<script>
  import gsap from "gsap";
  // 1. Fade-out del splash con GSAP
  gsap.to(".contenedorRelativo", {
    opacity: 0,
    duration: 2,
    ease: "power1.in",
    onStart: animateLogo,
    onComplete: eliminarScreen,
  });
  gsap.to(".logo", {
    opacity: 1,
    duration: 3,
  });
  const contenedor = document.querySelector(".contenedorRelativo");
  const logo = document.querySelector(".logo");
  const target = document.querySelector(".logotipoHE");
  // 2. Animación de traslación + escala
  function animateLogo() {
    if (!logo || !target) return;

    const from = logo.getBoundingClientRect();
    const to = target.getBoundingClientRect();

    const dx = to.left - from.left;
    const dy = to.top - from.top;
    const sx = to.width / from.width;
    const sy = to.height / from.height;

    // reset transform para partir de (0,0) y escala 1
    gsap.set(logo, { x: 0, y: 0, scaleX: 1, scaleY: 1 });

    gsap.to(logo, {
      opacity: 1,
      duration: 1,
      x: dx,
      y: dy,
      scaleX: sx,
      scaleY: sy,
      ease: "power2.inOut",
      onComplete: animateHE,
    });
  }
  function animateHE() {
    gsap.to(target, {
      opacity: 1,
    });
  }
  function eliminarScreen() {
    contenedor?.remove();
    logo?.remove();
  }
</script>
